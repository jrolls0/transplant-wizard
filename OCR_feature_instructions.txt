New Feature Goal: I want you to build a "Smart Extraction Pipeline" for when a patient or DUSW uploads a new document.
The Document Types:
* Group A (Digitizable): "One week of current labs" (MVP Priority), "Medicare 2728 form", "Medication list", "Immunization record".
* Group B (Read-Only / Narrative): "Social work summary", "Dietitian summary", "Recent care plan or progress notes", "Hemodialysis/Peritoneal Shift".
The Workflow:
1. Ingest (already implemented) :
* DUSW or patient uploads photo/PDF of patient’s document AND selects the document type from a dropdown 
* File is saved to S3.
2. Trigger:
* S3 Event triggers a Lambda function (DocumentProcessor).
* Crucial: The Lambda retrieves the document type from the upload metadata.


3. AI Processing (Extraction Only):
* Logic Branch: Check the document type.
* IF type is "Labs (1 Week)":
   * Run AWS Textract Queries (not generic OCR) to find the "Golden List" of transplant metrics.
   * The Query List (Ensure queries ask for full name "OR" abbreviation): 
      * "What is the Potassium?"
      * "What is the Blood Urea Nitrogen or BUN?"
      * "What is the Phosphorus?"
      * "What is the Hemoglobin or Hb?"
      * "What is the Platelets or PLT?"
      * "What is the Prothrombin Time or PT?"
      * "What is the International Normalized Ratio or INR?"
      * "What is the Partial Thromboplastin Time or PTT?"
      * "What is the Parathyroid Hormone or PTH?"
      * "What is the Hemoglobin A1c or A1c?"
      * "What is the Albumin?"
      * "What is the Total Bilirubin?"
      * "What is the Total Cholesterol?"
      * "What is the Urine Protein?"
      * "What is the Urine Red Cell Count?"
      * "What is the Urine White Cell Count?"
      * "What is the Urine Hemoglobin?"
   * If a value is not found, set it to null.
* IF type is ANYTHING ELSE (Group B OR other Group A types):
   * Skip extraction entirely. Set extracted_data to null.
4. Staging:
* Save the entry to the document_staging table with:
   * status: "PENDING_REVIEW"
   * document_type: (The value the user selected)
   * extracted_data: (JSON for Labs, or null for others)
5. Verification Dashboard (The Review Step):
* The Transplant Center Admin opens the "Review" page.
* Top Section: A dropdown shows the document_type (pre-filled with what the Patient selected).
   * Note: Patients make mistakes. The Admin is the final source of truth.
* Dynamic UI Logic:
   * Scenario 1 (Labs): If the type is "Labs", display the "Split-Screen" form with the extracted data fields.
   * Scenario 2 (Other Group A): If type is "Medicare 2728", etc., show message: "Auto-digitization for this type is coming soon."
   * Scenario 3 (Group B): If type is "Social Work", etc., show message: "Narrative Document. Please review PDF and confirm."
   * Scenario 4 (Correction): If the User selected "Social Work" (Group B), but the Admin realizes it is actually "Labs" and changes the dropdown to "Labs":
      * The UI should immediately reveal the empty Lab Data Form so the Admin can manually type the values (since AI extraction was skipped during ingestion).
6. Finalization:
* On "Confirm," the document is moved to the appropriate permanent table that holds patient records with the final, Admin-verified type and data.
Constraints:
* STRICT adherence to HIPAA best practices (Encryption at rest/transit).
* Lambda must handle both PDF and Image Inputs.
After this prompt, I will begin giving you broken up instructions in separate prompts on the actual implementation of this new feature. Before we begin, do you have any questions or concerns on this implementation?